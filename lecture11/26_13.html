<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src='../lecture8/21_OSC.js'></script>
    <title>Document</title>
</head>

<body>
    <h2>Example 26-13</h2>
    <canvas id='mycanvas' width='320' height='320'></canvas>

    <h2>Example 26-14</h2>
    <canvas id='mycanvas2' width='640' height='480'></canvas>

    <h2>Example 26-15</h2>
    <canvas id='mycanvas3' width='640' height='480'></canvas>

    <h2>Example 26-16</h2>
    <canvas id='mycanvas4' width='640' height='480'></canvas>

    <h2>Example 26-17</h2>
    <canvas id='mycanvas5' width='480' height='240'></canvas>

    <h2>Example 26-18</h2>
    <canvas id='mycanvas6' width='480' height='240'></canvas>

    <h2>Example 26-19</h2>
    <canvas id='mycanvas7' width='480' height='240'></canvas>

    <h2>Example 26-20</h2>
    <canvas id='mycanvas8' width='480' height='240'></canvas>

    <h2>Example 26-21</h2>
    <canvas id='mycanvas9' width='480' height='240'></canvas>

    <h2>Example 26-22</h2>
    <canvas id='mycanvas10' width='640' height='200'></canvas>
    <script>
        // Example 26-13
        canvas = O('mycanvas');
        context = canvas.getContext('2d');
        S(canvas).background = 'lightblue';
        context.strokeStyle = 'orange';
        context.fillStyle = 'yellow';

        orig = 160;
        points = 21;
        dist = Math.PI / points * 2;
        scale1 = 150;
        scale2 = 80;

        context.beginPath();

        for (j = 0; j < points; ++j) {
            x = Math.sin(j * dist);
            y = Math.cos(j * dist);

            context.lineTo(orig + x * scale1, orig + y * scale1);
            context.lineTo(orig + x * scale2, orig + y * scale2);
        }

        context.closePath();
        context.stroke();
        context.fill();

        // Example 26-14
        canvas = O('mycanvas2');
        context = canvas.getContext('2d');

        context.beginPath();
        for (j = 0; j < 10; ++j) {
            context.moveTo(20, j * 48);
            context.lineTo(620, j * 48);
            context.lineTo(620, j * 48 + 30);
            context.lineTo(20, j * 48 + 30);
        }

        context.closePath();
        context.stroke();

        // Example 26-15
        canvas = O('mycanvas3');
        context = canvas.getContext('2d');
        S(canvas).background = 'lightblue';
        context.fillStyle = 'white';
        context.strokeRect(20, 20, 600, 440);
        context.fillRect(20, 20, 600, 440);

        context.beginPath();

        for (j = 0; j < 10; ++j) {
            context.moveTo(20, j * 48);
            context.lineTo(620, j * 48);
            context.lineTo(620, j * 48 + 30);
            context.lineTo(20, j * 48 + 30);
        }

        context.clip();
        context.closePath();

        context.fillStyle = 'blue';
        context.fillRect(20, 20, 600, 320);
        context.fillStyle = 'green';
        context.fillRect(20, 320, 600, 140);
        context.strokeStyle = 'orange';
        context.fillStyle = 'yellow';

        orig = 170;
        points = 21;
        dist = Math.PI / points * 2;
        scale1 = 130;
        scale2 = 80;

        context.beginPath();

        for (j = 0; j < points; ++j) {
            x = Math.sin(j * dist);
            y = Math.cos(j * dist);
            context.lineTo(orig + x * scale1, orig + y * scale1);
            context.lineTo(orig + x * scale2, orig + y * scale2);
        }

        context.closePath();
        context.stroke();
        context.fill();

        // Example 26-16
        canvas = O('mycanvas4');
        context = canvas.getContext('2d');
        S(canvas).background = 'lightblue';
        context.lineWidth = 2;
        context.strokeStyle = 'blue';

        Math.degreesToRadians = function (degrees) {
            return degrees * Math.PI / 180;
        }

        arcs = [
            Math.PI,
            Math.PI * 2,
            Math.PI / 2,
            Math.PI / 180 * 59
        ];

        for (j = 0; j < 4; ++j) {
            context.beginPath();
            context.arc(80 + j * 160, 80, 70, 0, arcs[j]);
            context.closePath();
            context.stroke();
        }

        context.strokeStyle = 'red';

        for (j = 0; j < 4; ++j) {
            context.beginPath();
            context.arc(80 + j * 160, 240, 70, 0, arcs[j]);
            context.stroke();
            context.closePath();
        }

        context.strokeStyle = 'green';

        for (j = 0; j < 4; ++j) {
            context.beginPath();
            context.arc(80 + j * 160, 400, 70, 0, arcs[j], true);
            context.stroke();
            context.closePath();
        }

        // Example 26-17
        canvas = O('mycanvas5');
        context = canvas.getContext('2d');
        S(canvas).background = 'lightblue';
        context.strokeStyle = 'blue';

        for (j = 0; j <= 280; j += 40) {
            context.beginPath();
            context.moveTo(20, 20);
            context.arcTo(240, 240, 460, 20, j);
            context.lineTo(460, 20);
            context.stroke();
            context.closePath();
        }

        // Example 26-18
        canvas = O('mycanvas6');
        context = canvas.getContext('2d');
        S(canvas).background = 'lightblue';

        context.beginPath();
        context.moveTo(180, 60);
        context.quadraticCurveTo(240, 0, 300, 60);
        context.quadraticCurveTo(460, 30, 420, 100);
        context.quadraticCurveTo(480, 210, 340, 170);
        context.quadraticCurveTo(240, 240, 200, 170);
        context.quadraticCurveTo(100, 200, 140, 130);
        context.quadraticCurveTo(40, 40, 180, 60);
        context.fillStyle = 'white';
        context.fill();
        context.closePath();

        // Example 26-19
        canvas = O('mycanvas7');
        context = canvas.getContext('2d');
        S(canvas).background = 'lightblue';

        context.beginPath();
        context.moveTo(240, 20);
        context.bezierCurveTo(720, 480, -240, -240, 240, 220);
        context.stroke();
        context.closePath();

        // Example 26-20
        canvas = O('mycanvas8');
        context = canvas.getContext('2d');
        S(canvas).background = 'lightblue';

        myimage = new Image();
        myimage.src = 'https://raw.githubusercontent.com/RobinNixon/lpmj6/master/26/image.png';

        myimage.onload = function () {
            context.drawImage(myimage, 20, 20);
            context.drawImage(myimage, 140, 20, 220, 220);
            context.drawImage(myimage, 380, 20, 80, 220);
            context.drawImage(myimage, 30, 30, 40, 40, 20, 140, 100, 100);

            context.drawImage(canvas, 0, 0, 480, 260, 20, 140, 100, 100);
        }

        // Example 26-21
        canvas2 = O('mycanvas9');
        context2 = canvas2.getContext('2d');
        S(canvas2).background = 'lightblue';

        myimage2 = new Image();
        myimage2.src = 'https://raw.githubusercontent.com/RobinNixon/lpmj6/master/26/apple.png';

        orig = 95;
        points = 21;
        dist = Math.PI / points * 2;
        scale1 = 75;
        scale2 = 50;

        myimage2.onload = function () {
            context2.beginPath();

            for (j = 0; j < points; ++j) {
                x = Math.sin(j * dist);
                y = Math.cos(j * dist);
                context2.lineTo(orig + x * scale1, orig + y * scale1);
                context2.lineTo(orig + x * scale2, orig + y * scale2);
            }

            context2.closePath();

            context2.shadowOffsetX = 5;
            context2.shadowOffsetY = 5;
            context2.shadowBlur = 6;
            context2.shadowColor = '#444';
            context2.fillStyle = 'red';
            context2.stroke();
            context2.fill();

            context2.shadowOffsetX = 2;
            context2.shadowOffsetY = 2;
            context2.shadowBlur = 3;
            context2.shadowColor = 'yellow';
            context2.font = 'bold 36pt Times';
            context2.textBaseline = 'top';
            context2.fillStyle = 'green';
            context2.fillText('Sale now on!', 200, 5);

            context2.shadowOffsetX = 3;
            context2.shadowOffsetY = 3;
            context2.shadowBlur = 5;
            context2.shadowColor = 'black';
            context2.drawImage(myimage2, 245, 45);
        }

        // Example 26-22
        canvas3 = O('mycanvas10');
        context3 = canvas3.getContext('2d');
        S(canvas3).background = 'lightblue';

        myimage3 = new Image()
        myimage3.src = 'https://raw.githubusercontent.com/RobinNixon/lpmj6/master/26/photo.jpg'
        myimage3.crossOrigin = ''

        myimage3.onload = function () {
            context3.drawImage(myimage3, 0, 0)
            idata = context3.getImageData(0, 0, myimage3.width, myimage3.height)

            for (y = 0; y < myimage3.height; ++y) {
                for (x = 0; x < myimage3.width; ++x) {
                    pos = y * myimage3.width * 4 + x * 4
                    average =
                        (
                            idata.data[pos] +
                            idata.data[pos + 1] +
                            idata.data[pos + 2]
                        ) / 3

                    idata.data[pos] = average + 50
                    idata.data[pos + 1] = average
                    idata.data[pos + 2] = average - 50
                }
            }
            context3.putImageData(idata, 320, 0)
        }
    </script>
</body>

</html>